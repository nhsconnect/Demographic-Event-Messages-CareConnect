---
title: PDS Change of Address
keywords:  messaging, bundles
tags: [fhir,messaging]
sidebar: foundations_sidebar
permalink: explore_pds_change_of_address.html
summary: "The FHIR profiles used for the PDS Change of Address event message bundle"
---

PDS Change of Address event messages are generated by the Spine and published to the NEMS when the `H (usual)` address of a patient is changed within their PDS record. The event message will contain the patient's new address and their previous address as per the guidance below.

## FHIR Profiles ##

The following FHIR profiles are used to form the PDS Change of Address Event Message Bundle:

- [Bundle](http://hl7.org/fhir/STU3/StructureDefinition/Bundle)
- [Event-MessageHeader-1](https://fhir.nhs.uk/STU3/StructureDefinition/Event-MessageHeader-1) - where the coding and display elements for the 'event' type are fixed to 'â€‹pds-change-of-address-1 \| PDS Change of Address'
- [CareConnect-Communication-1](https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Communication-1)
- [CareConnect-Patient-1](https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Patient-1)
- [CareConnect-Organization-1](https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Organization-1)
- [CareConnect-HealthcareService-1](https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-HealthcareService-1)


## Bundle Structure

Specifies referencing within the Event Message Bundle.

<div style="text-align:center; margin-bottom:20px" >
	<a href="images/explore/pds_header.png" target="_blank"><img src="images/explore/pds_header.png"></a><br/>
	PDS Change of Address Bundle <a href="images/explore/pds_header.png" target="_blank">(open in new TAB)</a>
</div>

The `CareConnect-Patient-1` resource within the bundle will contain two addresses, one will represent the patient's old address and one will represent the patient's new address and will be identifiable by the `use` element within the addresses.


## PDS Change of Address Message Life Cycle ##

The `PDS Change of Address` event message will always contain a `messageEventType` extension with value `new` in the MessageHeader resource. There will be no `update` or `delete` version of this event message.

If a subscriber receives multiple `PDS Change of Address` event messages for the same patient, the latest event message as indicated by the `meta.lastUpdated` element within the MessageHeader resource should be considered the source of truth for the patient's correct address.

{% include important.html content="`PDS Change of Address` event messages will only be triggered for updates to the patient's home address on the Spine. Changes to a patient temporary address on Spine will not trigger a `PDS Change of Address` event message to be sent through the EMS." %}


## Onward Delivery ##

The delivery of the PDS Change of Address event messages to subscribers via MESH will use the following `WorkflowID` within the MESH control file. This `WorkflowID` will need to be added to the receiving MESH mailbox configuration before event messages can be received.

| MESH WorkflowID | `CHILDHEALTH_CHANGEOFADDRESS_UPDATE` |


## Resource Population Requirements and Guidance ##

The following requirements and resource population guidance should be followed in addition to the requirements and guidance outlined in the [Event Header](https://developer.nhs.uk/apis/ems-beta/explore_event_header_information.html) requirements page.


### [Bundle](http://hl7.org/fhir/STU3/StructureDefinition/Bundle)

The Bundle resource is the container for the event message and SHALL conform to the [Bundle](http://hl7.org/fhir/STU3/StructureDefinition/Bundle) FHIR profile.

| Resource Cardinality | 1..1 |

| Element | Cardinality | Additional Guidance |
| --- | --- | --- |
| type | 1..1 | Fixed value: `message` |


### [Event-MessageHeader-1](https://fhir.nhs.uk/STU3/StructureDefinition/Event-MessageHeader-1)

The MessageHeader resource included as part of the event message SHALL conform to the [Event-MessageHeader-1](https://fhir.nhs.uk/STU3/StructureDefinition/Event-MessageHeader-1) constrained FHIR profile and the additional population guidance as per the table below:

| Resource Cardinality | 1..1 |

| Element | Cardinality | Additional Guidance |
| --- | --- | --- |
| extension(messageEventType) | 1..1 | Fixed value: `new` |
| event | 1..1 | Fixed Value: pds-change-of-address-1 (PDS Change of Address) |
| responsible | 1..1 | This will reference the source organization of the event message.<br/> For PDS events this will be a reference to a CareConnect-Organization-1 resource within the message bundle. **\*** |
| focus | 1..1 | This will reference the "CareConnect-Communication-1" resource which contains information relating to the event message. |


### [CareConnect-Communication-1](https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Communication-1)

The Communication resource included in the event message SHALL conform to the [CareConnect-Communication-1](https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Communication-1) constrained FHIR profile and the additional population guidance as per the table below:

| Resource Cardinality | 1..1 |

| Element | Cardinality | Additional Guidance |
| --- | --- | --- |
| status | 1..1 | Fixed value: `completed` |
| sender | 0..1 | This will reference the sending organization of the event message.<br/> For PDS events this will be a reference to a CareConnect-Organization-1 resource within the message bundle. **\***|
| subject | 1..1 | This will reference the patient resource representing the patient who is the subject of this event. |


### [CareConnect-Patient-1](https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Patient-1)

The patient resource included in the event message SHALL conform to the [CareConnect-Patient-1](https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Patient-1) constrained FHIR profile and the additional population guidance as per the table below:

| Resource Cardinality | 1..1 |

| Element | Cardinality | Additional Guidance |
| --- | --- | --- |
| meta.versionId | 1..1 | This element will contain the serial change number (SCN) of the patient record within Spine at the time this event was published. |
| identifier | 1..1 | Patient NHS Number SHALL be included within the nhsNumber identifier slice |
| telecom | 0..1 | |
| telecom.system | 1..1 | Sending systems SHALL map the PDS codesystem value to its FHIR equivalent as per the table below |
| telecom.use | 0..1 | Sending systems SHALL map the PDS codesystem value to its FHIR equivalent as per the table below |
| **Current Address** |
| address.use | 1..1 | Fixed value: **home** <br/> Sending systems SHALL map the PDS codesystem value to its FHIR equivalent as per the table below |
| address.line | 1..* | Current address lines. Note: the address lines SHALL appear in the the resource in order, i.e. Address line 1 first, line 2 second, etc. |
| address.city | 0..1 | If included the city part of the current address. |
| address.district | 0..1 | If included the county element of the current address. |
| address.postalcode | 1..1 | Current address post code |
| address.text | 1..1 | Text representation of the patient's current address in full |
| address.period.start | 1..1 | The date from which the patient's current address was valid |
| **Previous Address** |
| address.use | 1..1 | Fixed value: **old**  <br/> Sending systems SHALL map the PDS codesystem value to its FHIR equivalent as per the table below |
| address.line | 1..* | Previous address lines. Note: the address lines SHALL appear in the the resource in order, i.e. Address line 1 first, line 2 second, etc. |
| address.city | 0..1 | If included the city part of the previous address. |
| address.district | 0..1 | If included the county element of the previous address. |
| address.postalcode | 1..1 | Previous address post code |
| address.text | 1..1 | Text representation of the patient's previous address in full |
| address.period.start | 1..1 | The date from which the patient's previous address was valid |
| address.period.end | 0..1 | The date from which the patient's previous address was no longer their current address |


#### Telecom System ####
Mapping for the codes from the ValueSet [PDS-CommunicationContactMethod-1](https://fhir.nhs.uk/STU3/ValueSet/PDS-CommunicationContactMethod-1).

| PDS Code | Equivalence | FHIR Code |
| --- | --- | --- |
| fax | equivalent | fax |
| mailto | equivalent | email |
| tel | equivalent | phone |
| textphone | equivalent | other |

#### Telecom Use ####
Mapping for the codes from the ValueSet [PDS-TelecomUsage-1](https://fhir.nhs.uk/STU3/ValueSet/PDS-TelecomUsage-1).

| PDS Code | PDS Display | Equivalence | FHIR Code |
| --- | --- | --- |
| AS | An automated answering machine | equivalent | home |
| EC | A contact specifically designated to be used for emergencies | equivalent | home |
| H | A communication address at a home | equivalent | home |
| HP | The primary home, to reach a person after business hours | equivalent | home |
| HV | A vacation home, to reach a person while on vacation | equivalent | temp |
| MC | A telecommunication device that moves and stays with its owner | equivalent | mobile |
| PG | A paging device suitable to solicit a callback or to leave a very short message | equivalent | mobile |
| WP | An office address | equivalent | work |

#### Address Use #### 
Mapping for the codes from the ValueSet [PDS-AddressType-1](https://fhir.nhs.uk/STU3/ValueSet/PDS-AddressType-1).

| PDS Code | PDS Display | Equivalence | FHIR Code |
| --- | --- | --- |
| H | Usual (home) address | equivalent | home |
| PST | Correspondence address | equivalent | home |
| TMP | Temporary address |equivalent | temp |


### [CareConnect-Organization-1](https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Organization-1)

The Organization resource(s) included in the event message SHALL conform to the [CareConnect-Organization-1](https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Organization-1) constrained FHIR profile and the additional population guidance as per the table below:

| Resource Cardinality | 1..2 |

| Element | Cardinality | Additional Guidance |
|---------|-------------|---------------------|
| identifier.system | 1..1 | Fixed value: https://fhir.nhs.uk/Id/ods-organization-code |
| identifier.value | 1..1 | Organisation's ODS Organization Code |
| name | 1..1 | Organisation's Name |

**\*** Organization details may be retrieved using the [ODS Lookup API](https://developer.nhs.uk/apis/ods/restfulapis_identification_organization.html) as [ODSAPI-Organization-1](https://fhir.nhs.uk/STU3/StructureDefinition/ODSAPI-Organization-1) resources. These MUST then be transformed to [CareConnect-Organization-1](https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-Organization-1) resources for use within the event message bundle.

**NB:** 'responsible' and 'sender' organisations may be the same or different organisations, therefore requiring a single or two CareConnect-Organization-1 resources within the event message bundle.


### [CareConnect-HealthcareService-1](https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-HealthcareService-1)

The HealthcareService resource included in the event message SHALL conform to the [CareConnect-HealthcareService-1](https://fhir.hl7.org.uk/STU3/StructureDefinition/CareConnect-HealthcareService-1) constrained FHIR profile and the additional population guidance as per the table below:

| Resource Cardinality | 0..1 |

| Element | Cardinality | Additional Guidance |
| --- | --- | --- |
| providedBy | 1..1 | This will reference the 'sender' organization of the event message. |
| type | 1..1 | Fixed value: PDS (Personal Demographics Service)<br/>This will represent the type of service responsible for the event message. This will have a value from the ValueSet [EMS-HealthcareServiceType-1](https://fhir.nhs.uk/STU3/ValueSet/EMS-HealthcareServiceType-1) |


## PDS Change of Address Example ##

<script src="https://gist.github.com/IOPS-DEV/828562b2e3edaec1ed43f48645f5376a.js"></script>

## Profile Change Mappings for PDS Change Of Address ##

Profiles used in [Demographics Update Event Messages 1.2.1-Release Candidate](https://developer.nhs.uk/apis/demographicupdates-120-rc/index.html) are replaced with: 

| Demographics Update Event Messages | Demographics Update Event Messages (Care Connect) |
|----------------------------|----------------------------------------|
| EMS-Bundle-1 | Bundle |
| EMS-MessageHeader-1 | Event-MessageHeader-1 |
| EMS-Communication-1 | CareConnect-Communication-1 |
| CareConnect-EMS-Patient-1 | CareConnect-Patient-1 |
| CareConnect-Organization-1 | - |
| EMS-HealthcareService-1 | CareConnect-HealthcareService-1 |